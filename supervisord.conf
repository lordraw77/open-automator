[supervisord]
nodaemon=true
user=root
logfile=/app/.logs/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:streamlit]
command=streamlit run streamlit_app.py --server.port=8502 --server.address=0.0.0.0
directory=/app
user=automator
autostart=true
autorestart=true
stderr_logfile=/app/.logs/streamlit_err.log
stdout_logfile=/app/.logs/streamlit_out.log
environment=WORKFLOW_PATH="/workflows",HOME="/home/automator"

[program:api]
command=gunicorn -w 4 -b 0.0.0.0:8503 --timeout 300 --access-logfile - --error-logfile - api_server:app
directory=/app
user=automator
autostart=true
autorestart=true
stderr_logfile=/app/.logs/api_err.log
stdout_logfile=/app/.logs/api_out.log
environment=WORKFLOW_PATH="/workflows",API_PORT="8503"
